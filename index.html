<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>METINET - Cif</title>

		<meta name="description" content="Présentation du Contrat Individuel de Formation - LP Metinet, communication">
		<meta name="author" content="TREBOUVIL Fabien">
		<meta name="author" content="ZULIANI Claire">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal-zul.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">
	

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">

			<!-- Introduction -->
				<section>
					<h1 class="big-title">Le congé individuel </br>de formation 
					 (CIF)</h1>
					<p>
						<small>Fabien Trébouvil</small> </br>
						<small>Claire Zuliani</small>
					</p>
				</section>

				<section>
					<h2>Sommaire</h2>
					<ul>
						<li>I. Le CIF, c'est quoi ?</li>
						<li>II. Demander un CIF</li>
						<li>III. Et une fois le CIF obtenu ?</li>
					</ul>
				</section>

			<!-- Studio HB -->
				<section data-background="#006666">
					<h1>I. Le CIF, c'est quoi ?</h1>
					<img src="img/cif_question.jpg">
				</section>
				<section data-background="#006666">
					<h2>A. En quelques mots</h2>
					<ul>
						<li>Droit de s’absenter de son poste de travail pour suivre une formation</li>
						<li>Formation demandée à titre individuel</li>
						<li>Jusqu'à une durée d'un an</li>
					</ul>
				</section>
				<section data-background="#006666" >
					<h2>B. Origine du CIF</h2>
					<ul>
						<li>Années 70 : les débuts de la formation professionnelle continue</li>
						<li>Des objectifs multiples</li>
							<ul>
								<li> Entre crise... </li>
								<li> ... et nouvelles aspirations</li>
							</ul>
						</li>
						<li>9 juillet 1970 : ANI</li>
					</ul>
				</section>
				<section data-background="#006666" >
					<h2>C. Pourquoi demander un CIF ?</h2>
					<ul>
						<li>Se qualifier</li>
						<li>Préparer et passer un examen</li>
						<li>Se reconvertir</li>
					</ul>
				</section>
			<!-- Projets -->
				<section data-background="#AA0400">
					<h1>II. Demander un CIF</h1>
					<ul>
						<li>A. Qui peut demander un CIF ?</li>
						<li>B. Comment demander un CIF ?</li>
						<li>C. Avec quel financement ?</li>
						<li>D. Quelle réponse possible de l'employeur ?</li>
					</ul>
				</section>
				<section data-background="#CC0400">
					<h2>A. Qui peut demander un CIF ?</h2>
					<ul>
						<li> Tout salarié</li>
						<li> Des conditions d'ancienneté à respecter</li>
						<ul>
							<li>CDI : 24 mois de travail, dont 12 dans l'entreprise</li>
							<li>CDD : 24 mois de travail, dont 4 dans les 12 derniers mois</li>
						</ul>
						<li>Un délai de franchise (de 6 mois à 6 ans)</li>
					</ul>
				</section>
				<section data-background="#CC0400">
					<h2>B. Comment demander un CIF ?</h2>
					<ul>
						<li> Une demande écrite à l'employeur, 60 ou 120 jours avant le début du stage</li>
						<li> Déposer un dossier auprès d'un organisme paritaire (FONGECIF ou OPCA)</li>
					</ul>
				</section>
				<section data-background="#CC0400">
					<h2>C. Avec quel financement ?</h2>
					<ul>
						<li> Une prise en charge de la rémunération</li>
						<li> Une prise en charge des frais</li>
						<ul>
							<li>Rémunération</li>
							<li>Formation</li>
							<li>Transport</li>
							<li>Hébergement</li>
						</ul>
					</ul>
				</section>

			<!-- Point technique -->	
				<section data-background="#AA0400" >
					<h2>B. L'imbrication de modèles dans Ruby on Rails</h2>
					<ul>
						<li>1. Le module Destination</li>
						<li>2. Problématiques du module Destination</li>
						<li>3. Résultat </li>
					</ul>
				</section>
				<section data-background="#AA0400" >
					<h2>1.a. Ehpad Invest - diagramme de classe</h2>
					<img  src="img/ehpad-diag.png" alt="Ehpad Invest">
				</section>
				<section data-background="#AA0400" >
					<h2> 1.b. Le module Destination </h2>
					<ul>
						<li> Un module central, à la structure fixe</li>
						<li> Un module comprenant 3 sous-sections </li>
						<li> L'éclatement des pages pour un meilleur référencement </li>
					</ul>
				</section>
				

				<section data-background="#AA0400" >
					<h2> 2. Problématiques de développement </h2>
					<ul>
						<li> a. Comment distinguer des sous-sections fortement liées ?</li>
						<li> b. Comment rendre la distinction transparente à l'administrateur ?</li>
					</ul>
				</section>
				<section data-background="#AA0400" >
					<h2>2.a. Distinguer et lier les sous-sections : associations et callbacks </h2>
					<img width="800" src="img/ehpad-dest-evol-diag.png" alt="Ehpad Invest">
				</section>
				<section data-background="#AA0400" >
					<h2>2.a. Distinguer et lier les sous-sections : associations et callbacks </h2>
					</br>
					<p>Définir la relation entre Destination et DestinationContent : 
						</br> associations <code>belongs_to</code> et  <code>has_many</code>
					</p>
				</br>
					<pre><code data-trim class="ruby">
					class Destination < ActiveRecord::Base

  has_many :destination_contents, -> { order('destination_contents.title') }, dependent: :destroy


class DestinationContent< ActiveRecord::Base

  belongs_to :destination
  				</code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 2.a. Distinguer et lier les sous-sections : associations et callbacks </h2>
					</br>
					<p>Créer automatiquement </br>les 3 DestinationContent de chaque Destination : 
						</br> les <code>callbacks</code>
					</p>
				</br>
					<pre><code data-trim class="ruby">
					class DestinationContent< ActiveRecord::Base

  SUB_TYPES = { definition: "Définition", market: "Marché", taxation: "Fiscalité"}

 					</code></pre>

				</section>
				<section data-background="#AA0400" >
					<h2> 2.a. Distinguer et lier les sous-sections : associations et callbacks </h2>
					</br>
					<pre><code data-trim class="ruby">

class Destination < ActiveRecord::Base

  after_create :create_content

  private
  def create_content
    DestinationContent::SUB_TYPES.each do |sub_type|
      self.destination_contents << DestinationContent.new
        (sub_type: "#{sub_type.first}", title: "#{sub_type.last}")
      self.save
    end
  end
  </code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 2.b. Rendre la distinction transparente : les nested attributes </h2>
					</br>
					<p>Les <code>nested attributes</code> : </br> permettre l'imbrication et la mise à jour de deux modèles dans un seul formulaire.
					</p>
					</br>
					<pre><code data-trim class="ruby">

					class Destination < ActiveRecord::Base

  accepts_nested_attributes_for :destination_contents

  					  </code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 2.b. Rendre la distinction transparente : les nested attributes </h2>
					</br>
					<p>Formulaire utilisant les <code>nested attributes</code> :</p>
					</br>
					<pre><code data-trim class="ruby">
					= form_for @destination, as: :destination, 
url: admin_destination_path(@destination), do |f|

  = shb_text_field f, :title, "Titre"
  = shb_text_area_block f, :description, "Description"

  =f.fields_for :destination_contents do |f_contents|
    = shb_text_area_block f_contents, :title, "Titre"
    = shb_text_area_block f_contents, :description, "Description"

  =' f.submit, value: "Valider", class: "btn"

  					  </code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 2.b. Rendre la distinction transparente : les nested attributes </h2>
					</br>
					<p>Un unique contrôleur pour mettre à jour les deux modèles :</p>
					</br>
					<pre><code data-trim class="ruby">
					class Admin::DestinationsController < Admin::AreaController

 private

 def destination_params
  params.require(:destination).permit(:name, :title,:description, :slug, :seo_title, :seo_description, :seo_keywords, 
   destination_contents_attributes: [ :id, :title, :description, :video, :slug, :seo_title, :seo_description, :seo_keywords])
 end

end

  					  </code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 2.b. Rendre la distinction transparente : les nested attributes </h2>
					</br>
					<p>Un unique contrôleur pour mettre à jour les deux modèles :</p>
					</br>
					<pre><code data-trim class="ruby">
					class Admin::DestinationsController < Admin::AreaController

  def edit
    @destination = Destination.find_from_slug params[:id]
  end

  def update
    if @destination.update_attributes(destination_params)
      flash[:notice] = "La rubrique a bien été mise à jour."
      redirect_to admin_destinations_path
    else
      flash[:error] =  "Une erreur s'est produite."
      @destinations = Destination.order(:position)
      render :edit
    end
  end

  					  </code></pre>
				</section>
				<section data-background="#AA0400" >
					<h2> 3. Résultat côté "public" : </h2>
					<img width="600" src="img/ehpad_page_dest.png" alt="Ehpad Invest">
				</section>
				<section data-background="#AA0400" >
					<h2> 3. Résultat côté "administration" : </h2>
					<img width="600" src="img/ehpad-edition-dest.png" alt="Ehpad Invest">
				</section>

			<!-- BILANS -->
					<section  data-background="#AA7000">
						<h1>Et une fois le CIF obtenu ? </h1>
					</section>
					<section data-background="#AA7000">
						<h2>A. Un stagiaire CIF est un salarié...</h2>
						<ul>
							<li>Maintien des congés payés</li>
							<li>Maintien des droits d'ancienneté</li>
							<li>Maintien des droits syndicaux</li>
						</ul>
					</section>
					<section data-background="#AA7000">
						<h2>B. ... qui est toujours salarié au terme du CIF</h2>
						<ul>
							<li>Un maintien au poste obligatoire pour l'employeur</li>
							<li>Le salarié libre de partir</li>
						</ul>
					</section>
					<section data-background="#AA7000" >
						<h2>Conclusion et retour d'expérience</h2>
						<ul>
							<li>Un droit décisif pour une formation déterminante</li>
							<li>Un droit qui n'est pas systématiquement accordé</li>
						</ul>
					</section>
					<section data-background="#AA7000" >
						<h2>Questions ?</h2>
						<img src="img/cif_conclu.jpg">
					</section>

			</div>
		</div>
		<aside class="controls slide-number" ></aside>
		<script src="js/jquery.js"></script>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		
		<script>

		function currentPageFormatter(event) {
		        var formattedStr;
		        
		        if (event.indexh === 0) {
		                return "";
		        }
		 
		        formattedStr = event.indexh;
		 
		        if (event.indexv) {
		            formattedStr += "/" + event.indexv;
		        }
		 
		        return formattedStr;
		    }
		 
		    Reveal.addEventListener( 'ready', function( event ) {
		        $('<aside class="controls slide-number" style="display: block; left: 10px; right: initial;bottom: -30px; text-align: center; font-size:20px;"></aside>')
		            .text(currentPageFormatter(event))
		            .appendTo('.reveal.center');
		    } );
		 
		    // Fires each time a new slide is activated
		    Reveal.addEventListener( 'slidechanged', function( event ) {
		        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
		        $(".slide-number").text(currentPageFormatter(event));
		    } );

		</script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
